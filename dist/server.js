"use strict";
const express = require('express');
const path = require('path');
var port = process.env.PORT || 3000;
var app = express();
var bodyParser = require('body-parser');
var mongoose = require('mongoose');
var jwt = require('express-jwt');
var cors = require('cors');
var router = express.Router();
var multer = require('multer');
var multers3 = require('multer-s3');
var serveIndex = require('serve-index');
var aws = require('aws-sdk');
var Apartment = require('./models/apartment');
var BusinessUnit = require('./models/businessunit');
var Files = require('./models/file');
var Task = require('./models/task');
var FileMongo = require('./models/file');
var s3 = new aws.S3({});
//var filelocation;
var upload = multer({
    storage: multers3({
        s3: s3,
        bucket: 'angular2files',
        key: function (req, file, cb, res) {
            cb(null, file.originalname); //use Date.now() for unique file key           
            //            filelocation = file.location;
            //            res.send(file);
        }
    })
});
app.use('/app', express.static(path.resolve(__dirname, 'app')));
app.use('/libs', express.static(path.resolve(__dirname, 'libs')));
app.use('/uploads', express.static(path.resolve(__dirname, 'uploads')));
app.use('/filesdirectory', serveIndex(__dirname + '/uploads'));
app.use(cors());
app.use(bodyParser.urlencoded({ extended: true }));
app.use(bodyParser.json());
app.use(function (req, res, next) {
    res.header("Access-Control-Allow-Origin", "*");
    res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");
    next();
});
// app.post("/uploads", multer({dest: "./uploads/"}).array("uploads[]", 12), function(req, res) {
//         var filemongo = new FileMongo();
//         filemongo.originalname = req.files[0].originalname;
//         filemongo._idapt = req.body._idapt;
//         console.log(req.body);
//         filemongo.save(function(err) {
//         });        
//     (res.send(req.files)); 
// });
//duplicate files are not handled, best would be to send multer filename to aws
app.post('/s3upload', upload.array('uploads[]', 12), function (req, res, next) {
    var filemongo = new FileMongo();
    filemongo.originalname = req.files[0].originalname;
    filemongo._idapt = req.body._idapt;
    filemongo.createddate = Date.now();
    //req.file
    //console.log(req.file.originalname);         
    filemongo.save(function (err) {
    });
    (res.send(req.files));
    //  res.send("Uploaded!");
});
// app.get('/download', function(req, res){
//   var file = '/uploads/e4bc8831547dcb0be7333bbce387de5b';
//   res.download(file); // Set disposition and send it.
// });
var dbstring = process.env.MONGOLAB_URI ||
    process.env.MONGOHQ_URL ||
    'mongodb://heroku_d4n6hnhl:q4rfc1uikd51d5sups9mipivnl@ds057254.mlab.com:57254/heroku_d4n6hnhl';
var server = app.listen(port, function () {
    var host = server.address().address;
    var port = server.address().port;
    console.log('This express app is listening on port:' + port);
});
var authCheck = jwt({
    secret: new Buffer('460DPY7Pi4xnRUiirPuEfBdxS4wzQGcx8rlA-Qw76fURkmiwtrhv_IXffzsI84HM', 'base64'),
    audience: '1mvHGykVHvxzpwstp2wTmrzLrpzouVTm'
});
mongoose.connect(dbstring, function (err, res) {
    if (err) {
        console.log('ERROR connecting to: ' + dbstring + '. ' + err);
    }
    else {
        console.log('Successfully connected to: ' + dbstring);
    }
    ;
});
router.get('/app/*', function (req, res) {
    res.sendFile(path.resolve(__dirname, 'index.html'));
});
router.get('/api', authCheck, function (req, res) {
    res.json({ message: 'hooray! welcome to our api!' });
});
router.route('/api/getusers')
    .get(function (req, res) {
    Apartment.find({ userEmail: { $exists: true, $ne: null } }, 'userEmail', function (err, apartments) {
        if (err)
            res.send(err);
        res.json(apartments);
    });
});
router.route('/api/apartments/updateprofile/:_id')
    .put(function (req, res) {
    Apartment.findById(req.params._id, function (err, apartment) {
        if (err)
            res.send(err);
        apartment.userFirstName = req.body.userFirstName;
        apartment.save(function (err) {
            if (err)
                res.send(err);
            res.json({ message: 'user profile updated!' });
        });
    });
});
router.route('/api/apartments/getprofile/:userEmail')
    .get(function (req, res) {
    Apartment.find({ userEmail: req.params.userEmail }, function (err, apartment) {
        if (err)
            res.send(err);
        res.json(apartment);
    });
});
//  **The above code can be written as follows as well **
//  router.route('/api/apartments/getprofile1/:UserEmail')    
//  .get(function(req, res, next) {
//      var query = Apartment.find({}).select('.where({userEmail:req.params.UserEmail}); -_id').where({userEmail:req.params.UserEmail});
//         query.exec(function (err, Apartment) {
//      if (err) return next(err);
//      res.send(Apartment);
//  });
// })
//Business Unit Service endpoints 
router.route('/api/businessunits')
    .get(function (req, res) {
    BusinessUnit.find({ BusinessUnitName: { $exists: true } }, function (err, businessunits) {
        if (err)
            res.send(err);
        res.json(businessunits);
    });
});
router.route('/api/businessunits/butype')
    .get(function (req, res) {
    BusinessUnit.find({ unitID: { $exists: true }, UnitType: { $exists: true } }, 'unitID UnitType', { sort: { unitID: 1 } }, function (err, businessunits) {
        if (err)
            res.send(err);
        res.json(businessunits);
    });
});
// db.contest.aggregate([
//     {"$group" : {_id:"$province", count:{$sum:1}}}
// ])
router.route('/api/apartments/getstats')
    .get(function (req, res) {
    //Apartment.aggregate([{$match:{_id: "aptType"}},{$group:{_id:{aptType:"$aptType"},count:{$sum:1}}}],function(err, apartments) {
    Apartment.find('aptType', function (err, apartments) {
        if (err)
            res.send(err);
        res.json(apartments);
    });
});
router.route('/api/apartments/getdetails/:aptType/:aptStatus')
    .get(function (req, res) {
    Apartment.find({ $and: [{ aptType: req.params.aptType }, { aptStatus: req.params.aptStatus }] }, function (err, apartments) {
        if (err)
            res.send(err);
        res.json(apartments);
    });
});
router.route('/api/apartments/files/:_idapt')
    .get(function (req, res) {
    //Files.find({_idapt:req.params._idapt}, function(err, files) {
    //Files.find({_idapt:req.params._idapt}).sort({'createddate.$date': 1}).toArray(function(err, files) {
    Files.find({ _idapt: req.params._idapt }).sort({ createddate: -1 }).limit(3).exec(function (err, files) {
        if (err)
            res.send(err);
        res.json(files);
    });
});
/*Task Endpoints*/
router.route('/api/newtask')
    .post(function (req, res) {
    var task = new Task();
    task.taskname = req.body.taskname;
    task.taskdesc = req.body.taskdesc;
    task.assignedto = req.body.assignedto;
    task.taskstatus = 'OPEN';
    task.tasktype = 'task';
    task.save(function (err) {
        if (err)
            res.send(err);
        res.json({ message: 'Task created!' });
    });
})
    .get(function (req, res) {
    Task.find(function (err, tasks) {
        if (err)
            res.send(err);
        res.json(tasks);
    });
});
router.route('/api/mytask/:userEmail')
    .get(function (req, res) {
    Task.find({ $and: [{ assignedto: req.params.userEmail.toLowerCase() }, { taskstatus: 'OPEN' }] }, function (err, task) {
        if (err)
            res.send(err);
        res.json(task);
    });
});
router.route('/api/newtask/:_id')
    .get(function (req, res) {
    Task.findById(req.params.task_id, function (err, task) {
        if (err)
            res.send(err);
        res.json(task);
    });
})
    .put(function (req, res) {
    Task.findById(req.params._id, function (err, task) {
        if (err)
            res.send(err);
        task.taskname = req.body.taskname;
        task.taskdesc = req.body.taskdesc;
        task.save(function (err) {
            if (err)
                res.send(err);
            res.json({ message: 'task updated!' });
        });
    });
})
    .delete(function (req, res) {
    Task.remove({
        _id: req.params.task_id
    }, function (err, task) {
        if (err)
            res.send(err);
        res.json({ message: 'Successfully deleted' });
    });
});
router.route('/api/mark/:_id')
    .put(function (req, res) {
    Task.findById(req.params._id, function (err, task) {
        if (err)
            res.send(err);
        task.taskstatus = 'CLOSED';
        task.save(function (err) {
            if (err)
                res.send(err);
            res.json({ message: 'task updated!' });
        });
    });
});
/*Request Endpoints*/
router.route('/api/newrequest')
    .post(function (req, res) {
    var task = new Task();
    task.taskname = req.body.taskname;
    task.taskdesc = req.body.taskdesc;
    //task.assignedto = req.body.assignedto;
    task.tasktype = 'request';
    task.save(function (err) {
        if (err)
            res.send(err);
        res.json({ message: 'Request created!' });
    });
});
app.use('/', router);

//# sourceMappingURL=data:application/json;base64,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SUFBSSxFQUFFLENBQUM7SUFDdEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUNsQyxJQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ2xDLHdDQUF3QztJQUN4QyxJQUFJLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQztJQUMxQixJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVMsR0FBRztRQUNsQixFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUM7WUFDSixHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDO0lBQzlDLENBQUMsQ0FBQyxDQUFDO0FBQ1QsQ0FBQyxDQUFDLENBQUE7QUFHSixHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQyIsImZpbGUiOiJzZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuaW1wb3J0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XHJcbnZhciBwb3J0OiBudW1iZXIgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDA7XHJcbnZhciBhcHAgPSBleHByZXNzKCk7XHJcbnZhciBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKTtcclxudmFyIG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxudmFyIGp3dCA9IHJlcXVpcmUoJ2V4cHJlc3Mtand0Jyk7XHJcbnZhciBjb3JzID0gcmVxdWlyZSgnY29ycycpO1xyXG52YXIgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxudmFyIG11bHRlciA9IHJlcXVpcmUoJ211bHRlcicpO1xyXG52YXIgbXVsdGVyczMgPSByZXF1aXJlKCdtdWx0ZXItczMnKTtcclxudmFyIHNlcnZlSW5kZXggPSByZXF1aXJlKCdzZXJ2ZS1pbmRleCcpO1xyXG52YXIgYXdzID0gcmVxdWlyZSgnYXdzLXNkaycpXHJcblxyXG52YXIgQXBhcnRtZW50ID0gcmVxdWlyZSgnLi9tb2RlbHMvYXBhcnRtZW50Jyk7XHJcbnZhciBCdXNpbmVzc1VuaXQgPSByZXF1aXJlKCcuL21vZGVscy9idXNpbmVzc3VuaXQnKTsgXHJcbnZhciBGaWxlcyA9IHJlcXVpcmUoJy4vbW9kZWxzL2ZpbGUnKTtcclxudmFyIFRhc2sgPSByZXF1aXJlKCcuL21vZGVscy90YXNrJyk7XHJcbnZhciBGaWxlTW9uZ28gPSByZXF1aXJlKCcuL21vZGVscy9maWxlJyk7XHJcbnZhciBzMyA9IG5ldyBhd3MuUzMoeyAvKiAuLi4gKi8gfSlcclxuLy92YXIgZmlsZWxvY2F0aW9uO1xyXG5cclxudmFyIHVwbG9hZCA9IG11bHRlcih7XHJcbiAgICBzdG9yYWdlOiBtdWx0ZXJzMyh7XHJcbiAgICAgICAgczM6czMsICAgICAgIFxyXG4gICAgICAgIGJ1Y2tldDogJ2FuZ3VsYXIyZmlsZXMnLFxyXG4gICAgICAgIGtleTogZnVuY3Rpb24gKHJlcSxmaWxlLCBjYixyZXMpIHtcclxuICAgICAgICAgICAgICBjYihudWxsLCBmaWxlLm9yaWdpbmFsbmFtZSk7IC8vdXNlIERhdGUubm93KCkgZm9yIHVuaXF1ZSBmaWxlIGtleSAgICAgICAgICAgXHJcbiAgLy8gICAgICAgICAgICBmaWxlbG9jYXRpb24gPSBmaWxlLmxvY2F0aW9uO1xyXG4gIC8vICAgICAgICAgICAgcmVzLnNlbmQoZmlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufSk7XHJcblxyXG5hcHAudXNlKCcvYXBwJywgZXhwcmVzcy5zdGF0aWMocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2FwcCcpKSk7XHJcbmFwcC51c2UoJy9saWJzJywgZXhwcmVzcy5zdGF0aWMocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2xpYnMnKSkpO1xyXG5hcHAudXNlKCcvdXBsb2FkcycsIGV4cHJlc3Muc3RhdGljKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICd1cGxvYWRzJykpKTtcclxuYXBwLnVzZSgnL2ZpbGVzZGlyZWN0b3J5Jywgc2VydmVJbmRleChfX2Rpcm5hbWUgKyAnL3VwbG9hZHMnKSk7XHJcbmFwcC51c2UoY29ycygpKTtcclxuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XHJcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xyXG5cclxuXHJcbmFwcC51c2UoZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcclxuICAgIHJlcy5oZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIiwgXCIqXCIpO1xyXG4gICAgcmVzLmhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIiwgXCJPcmlnaW4sIFgtUmVxdWVzdGVkLVdpdGgsIENvbnRlbnQtVHlwZSwgQWNjZXB0XCIpO1xyXG4gICAgbmV4dCgpO1xyXG59KTtcclxuXHJcbi8vIGFwcC5wb3N0KFwiL3VwbG9hZHNcIiwgbXVsdGVyKHtkZXN0OiBcIi4vdXBsb2Fkcy9cIn0pLmFycmF5KFwidXBsb2Fkc1tdXCIsIDEyKSwgZnVuY3Rpb24ocmVxLCByZXMpIHtcclxuLy8gICAgICAgICB2YXIgZmlsZW1vbmdvID0gbmV3IEZpbGVNb25nbygpO1xyXG4vLyAgICAgICAgIGZpbGVtb25nby5vcmlnaW5hbG5hbWUgPSByZXEuZmlsZXNbMF0ub3JpZ2luYWxuYW1lO1xyXG4vLyAgICAgICAgIGZpbGVtb25nby5faWRhcHQgPSByZXEuYm9keS5faWRhcHQ7XHJcbi8vICAgICAgICAgY29uc29sZS5sb2cocmVxLmJvZHkpO1xyXG4vLyAgICAgICAgIGZpbGVtb25nby5zYXZlKGZ1bmN0aW9uKGVycikge1xyXG4vLyAgICAgICAgIH0pOyAgICAgICAgXHJcbi8vICAgICAocmVzLnNlbmQocmVxLmZpbGVzKSk7IFxyXG4vLyB9KTtcclxuXHJcbi8vZHVwbGljYXRlIGZpbGVzIGFyZSBub3QgaGFuZGxlZCwgYmVzdCB3b3VsZCBiZSB0byBzZW5kIG11bHRlciBmaWxlbmFtZSB0byBhd3NcclxuYXBwLnBvc3QoJy9zM3VwbG9hZCcsIHVwbG9hZC5hcnJheSgndXBsb2Fkc1tdJywxMiksIGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xyXG4gICAgICAgICB2YXIgZmlsZW1vbmdvID0gbmV3IEZpbGVNb25nbygpO1xyXG4gICAgICAgICBmaWxlbW9uZ28ub3JpZ2luYWxuYW1lID0gcmVxLmZpbGVzWzBdLm9yaWdpbmFsbmFtZTtcclxuICAgICAgICAgZmlsZW1vbmdvLl9pZGFwdCA9IHJlcS5ib2R5Ll9pZGFwdDtcclxuICAgICAgICAgZmlsZW1vbmdvLmNyZWF0ZWRkYXRlID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgLy9yZXEuZmlsZVxyXG4gICAgICAgICAvL2NvbnNvbGUubG9nKHJlcS5maWxlLm9yaWdpbmFsbmFtZSk7ICAgICAgICAgXHJcbiAgICAgICAgIGZpbGVtb25nby5zYXZlKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIH0pO1xyXG4gICAgKHJlcy5zZW5kKHJlcS5maWxlcykpOyBcclxuLy8gIHJlcy5zZW5kKFwiVXBsb2FkZWQhXCIpO1xyXG59KTtcclxuXHJcblxyXG4vLyBhcHAuZ2V0KCcvZG93bmxvYWQnLCBmdW5jdGlvbihyZXEsIHJlcyl7XHJcbi8vICAgdmFyIGZpbGUgPSAnL3VwbG9hZHMvZTRiYzg4MzE1NDdkY2IwYmU3MzMzYmJjZTM4N2RlNWInO1xyXG4vLyAgIHJlcy5kb3dubG9hZChmaWxlKTsgLy8gU2V0IGRpc3Bvc2l0aW9uIGFuZCBzZW5kIGl0LlxyXG4vLyB9KTtcclxuXHJcbnZhciBkYnN0cmluZyA9XHJcbiAgICBwcm9jZXNzLmVudi5NT05HT0xBQl9VUkkgfHxcclxuICAgIHByb2Nlc3MuZW52Lk1PTkdPSFFfVVJMIHx8XHJcbiAgICAnbW9uZ29kYjovL2hlcm9rdV9kNG42aG5obDpxNHJmYzF1aWtkNTFkNXN1cHM5bWlwaXZubEBkczA1NzI1NC5tbGFiLmNvbTo1NzI1NC9oZXJva3VfZDRuNmhuaGwnO1xyXG5cclxudmFyIHNlcnZlciA9IGFwcC5saXN0ZW4ocG9ydCwgZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaG9zdCA9IHNlcnZlci5hZGRyZXNzKCkuYWRkcmVzcztcclxuICAgIHZhciBwb3J0ID0gc2VydmVyLmFkZHJlc3MoKS5wb3J0O1xyXG4gICAgY29uc29sZS5sb2coJ1RoaXMgZXhwcmVzcyBhcHAgaXMgbGlzdGVuaW5nIG9uIHBvcnQ6JyArIHBvcnQpO1xyXG59KTtcclxuXHJcbnZhciBhdXRoQ2hlY2sgPSBqd3Qoe1xyXG4gIHNlY3JldDogbmV3IEJ1ZmZlcignNDYwRFBZN1BpNHhuUlVpaXJQdUVmQmR4UzR3elFHY3g4cmxBLVF3NzZmVVJrbWl3dHJodl9JWGZmenNJODRITScsICdiYXNlNjQnKSxcclxuICBhdWRpZW5jZTogJzFtdkhHeWtWSHZ4enB3c3RwMndUbXJ6THJwem91VlRtJ1xyXG59KTtcclxuXHJcbm1vbmdvb3NlLmNvbm5lY3QoZGJzdHJpbmcsIGZ1bmN0aW9uIChlcnIsIHJlcykge1xyXG4gICAgICBpZiAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nICgnRVJST1IgY29ubmVjdGluZyB0bzogJyArIGRic3RyaW5nICsgJy4gJyArIGVycik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nICgnU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0bzogJyArIGRic3RyaW5nKTtcclxuICAgICAgfTtcclxufSk7XHJcblxyXG5yb3V0ZXIuZ2V0KCcvYXBwLyonLCBmdW5jdGlvbihyZXEsIHJlcykge1xyXG4gICByZXMuc2VuZEZpbGUocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2luZGV4Lmh0bWwnKSk7XHJcbn0pO1xyXG5cclxucm91dGVyLmdldCgnL2FwaScsYXV0aENoZWNrLCBmdW5jdGlvbihyZXEsIHJlcykge1xyXG4gICByZXMuanNvbih7IG1lc3NhZ2U6ICdob29yYXkhIHdlbGNvbWUgdG8gb3VyIGFwaSEnIH0pO1xyXG59KTtcclxuXHJcbiAgcm91dGVyLnJvdXRlKCcvYXBpL2dldHVzZXJzJykgICAgXHJcbiAgICAuZ2V0KGZ1bmN0aW9uKHJlcSwgcmVzKSB7ICAgICAgICBcclxuICAgICAgICBBcGFydG1lbnQuZmluZCh7dXNlckVtYWlsOiB7JGV4aXN0czogdHJ1ZSwgJG5lOiBudWxsfX0sJ3VzZXJFbWFpbCcsIGZ1bmN0aW9uKGVyciwgYXBhcnRtZW50cykge1xyXG4gICAgICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoZXJyKTtcclxuICAgICAgICAgICAgcmVzLmpzb24oYXBhcnRtZW50cyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuXHJcbiAgICByb3V0ZXIucm91dGUoJy9hcGkvYXBhcnRtZW50cy91cGRhdGVwcm9maWxlLzpfaWQnKSAgICBcclxuICAgIC5wdXQoZnVuY3Rpb24ocmVxLCByZXMpIHtcclxuICAgICAgICBBcGFydG1lbnQuZmluZEJ5SWQocmVxLnBhcmFtcy5faWQsIGZ1bmN0aW9uKGVyciwgYXBhcnRtZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgIHJlcy5zZW5kKGVycik7XHJcbiAgICAgICAgICAgIGFwYXJ0bWVudC51c2VyRmlyc3ROYW1lID0gcmVxLmJvZHkudXNlckZpcnN0TmFtZTsgIFxyXG4gICAgICAgICAgICBhcGFydG1lbnQuc2F2ZShmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQoZXJyKTtcclxuICAgICAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ3VzZXIgcHJvZmlsZSB1cGRhdGVkIScgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuICBcclxuICAgIHJvdXRlci5yb3V0ZSgnL2FwaS9hcGFydG1lbnRzL2dldHByb2ZpbGUvOnVzZXJFbWFpbCcpICAgIFxyXG4gICAgLmdldChmdW5jdGlvbihyZXEsIHJlcykge1xyXG4gICAgICAgIEFwYXJ0bWVudC5maW5kKHt1c2VyRW1haWw6cmVxLnBhcmFtcy51c2VyRW1haWx9LGZ1bmN0aW9uKGVyciwgYXBhcnRtZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICByZXMuc2VuZChlcnIpO1xyXG4gICAgICAgICAgICByZXMuanNvbihhcGFydG1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuXHJcbiAgIC8vICAqKlRoZSBhYm92ZSBjb2RlIGNhbiBiZSB3cml0dGVuIGFzIGZvbGxvd3MgYXMgd2VsbCAqKlxyXG4gICAvLyAgcm91dGVyLnJvdXRlKCcvYXBpL2FwYXJ0bWVudHMvZ2V0cHJvZmlsZTEvOlVzZXJFbWFpbCcpICAgIFxyXG4gICAvLyAgLmdldChmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xyXG4gICAvLyAgICAgIHZhciBxdWVyeSA9IEFwYXJ0bWVudC5maW5kKHt9KS5zZWxlY3QoJy53aGVyZSh7dXNlckVtYWlsOnJlcS5wYXJhbXMuVXNlckVtYWlsfSk7IC1faWQnKS53aGVyZSh7dXNlckVtYWlsOnJlcS5wYXJhbXMuVXNlckVtYWlsfSk7XHJcbiAgIC8vICAgICAgICAgcXVlcnkuZXhlYyhmdW5jdGlvbiAoZXJyLCBBcGFydG1lbnQpIHtcclxuICAgLy8gICAgICBpZiAoZXJyKSByZXR1cm4gbmV4dChlcnIpO1xyXG4gICAvLyAgICAgIHJlcy5zZW5kKEFwYXJ0bWVudCk7XHJcbiAgIC8vICB9KTtcclxuICAgLy8gfSlcclxuICAgIFxyXG4gICAvL0J1c2luZXNzIFVuaXQgU2VydmljZSBlbmRwb2ludHMgXHJcbiAgICByb3V0ZXIucm91dGUoJy9hcGkvYnVzaW5lc3N1bml0cycpICAgICAgICAgICAgIFxyXG4gICAgLmdldChmdW5jdGlvbihyZXEsIHJlcykge1xyXG4gICAgICAgIEJ1c2luZXNzVW5pdC5maW5kKHtCdXNpbmVzc1VuaXROYW1lOiB7JGV4aXN0czogdHJ1ZX19LGZ1bmN0aW9uKGVyciwgYnVzaW5lc3N1bml0cykge1xyXG4gICAgICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoZXJyKTtcclxuXHJcbiAgICAgICAgICAgIHJlcy5qc29uKGJ1c2luZXNzdW5pdHMpO1xyXG4gICAgICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAgIHJvdXRlci5yb3V0ZSgnL2FwaS9idXNpbmVzc3VuaXRzL2J1dHlwZScpICAgICAgICAgICAgIFxyXG4gICAgLmdldChmdW5jdGlvbihyZXEsIHJlcykge1xyXG4gICAgICAgIEJ1c2luZXNzVW5pdC5maW5kKHt1bml0SUQ6IHskZXhpc3RzOiB0cnVlfSwgVW5pdFR5cGU6IHskZXhpc3RzOiB0cnVlfX0sJ3VuaXRJRCBVbml0VHlwZScse3NvcnQ6e3VuaXRJRDogMX19LGZ1bmN0aW9uKGVyciwgYnVzaW5lc3N1bml0cykge1xyXG4gICAgICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoZXJyKTtcclxuXHJcbiAgICAgICAgICAgIHJlcy5qc29uKGJ1c2luZXNzdW5pdHMpO1xyXG4gICAgICAgICB9KTtcclxuICAgfSk7ICAgXHJcblxyXG4gICAgLy8gZGIuY29udGVzdC5hZ2dyZWdhdGUoW1xyXG4vLyAgICAge1wiJGdyb3VwXCIgOiB7X2lkOlwiJHByb3ZpbmNlXCIsIGNvdW50Onskc3VtOjF9fX1cclxuLy8gXSlcclxuXHJcbiAgICByb3V0ZXIucm91dGUoJy9hcGkvYXBhcnRtZW50cy9nZXRzdGF0cycpICAgICAgICAgICAgIFxyXG4gICAgLmdldChmdW5jdGlvbihyZXEsIHJlcykge1xyXG4gICAgICAgIC8vQXBhcnRtZW50LmFnZ3JlZ2F0ZShbeyRtYXRjaDp7X2lkOiBcImFwdFR5cGVcIn19LHskZ3JvdXA6e19pZDp7YXB0VHlwZTpcIiRhcHRUeXBlXCJ9LGNvdW50Onskc3VtOjF9fX1dLGZ1bmN0aW9uKGVyciwgYXBhcnRtZW50cykge1xyXG4gICAgICAgICAgQXBhcnRtZW50LmZpbmQoJ2FwdFR5cGUnLGZ1bmN0aW9uKGVyciwgYXBhcnRtZW50cykge1xyXG4gICAgICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoZXJyKTtcclxuICAgICAgICAgICAgcmVzLmpzb24oYXBhcnRtZW50cyk7XHJcbiAgICAgICAgIH0pO1xyXG4gICB9KTsgICAgICAgXHJcbiBcclxuICAgcm91dGVyLnJvdXRlKCcvYXBpL2FwYXJ0bWVudHMvZ2V0ZGV0YWlscy86YXB0VHlwZS86YXB0U3RhdHVzJykgICAgICAgICAgICAgXHJcbiAgICAuZ2V0KGZ1bmN0aW9uKHJlcSwgcmVzKSB7ICAgICAgICBcclxuICAgICAgICAgIEFwYXJ0bWVudC5maW5kKHskYW5kOlt7YXB0VHlwZTpyZXEucGFyYW1zLmFwdFR5cGV9LHthcHRTdGF0dXM6cmVxLnBhcmFtcy5hcHRTdGF0dXN9XX0sIGZ1bmN0aW9uKGVyciwgYXBhcnRtZW50cykge1xyXG4gICAgICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoZXJyKTtcclxuICAgICAgICAgICAgcmVzLmpzb24oYXBhcnRtZW50cyk7XHJcbiAgICAgICAgIH0pO1xyXG4gICB9KTsgICAgICAgXHJcblxyXG5cclxuICAgIHJvdXRlci5yb3V0ZSgnL2FwaS9hcGFydG1lbnRzL2ZpbGVzLzpfaWRhcHQnKSAgICAgICAgICAgICBcclxuICAgIC5nZXQoZnVuY3Rpb24ocmVxLCByZXMpIHsgICAgICAgIFxyXG4gICAgICAgICAgLy9GaWxlcy5maW5kKHtfaWRhcHQ6cmVxLnBhcmFtcy5faWRhcHR9LCBmdW5jdGlvbihlcnIsIGZpbGVzKSB7XHJcbiAgICAgICAgICAvL0ZpbGVzLmZpbmQoe19pZGFwdDpyZXEucGFyYW1zLl9pZGFwdH0pLnNvcnQoeydjcmVhdGVkZGF0ZS4kZGF0ZSc6IDF9KS50b0FycmF5KGZ1bmN0aW9uKGVyciwgZmlsZXMpIHtcclxuICAgICAgICAgICAgRmlsZXMuZmluZCh7X2lkYXB0OnJlcS5wYXJhbXMuX2lkYXB0fSkuc29ydCh7Y3JlYXRlZGRhdGU6IC0xfSkubGltaXQoMykuZXhlYyhmdW5jdGlvbihlcnIsIGZpbGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICByZXMuc2VuZChlcnIpO1xyXG4gICAgICAgICAgICByZXMuanNvbihmaWxlcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgIH0pOyAgXHJcblxyXG4gIC8qVGFzayBFbmRwb2ludHMqL1xyXG5cclxuICByb3V0ZXIucm91dGUoJy9hcGkvbmV3dGFzaycpXHJcbiAgICAucG9zdChmdW5jdGlvbihyZXEsIHJlcykgeyAgICAgICAgXHJcbiAgICAgICAgdmFyIHRhc2sgPSBuZXcgVGFzaygpO1xyXG4gICAgICAgIHRhc2sudGFza25hbWUgPSByZXEuYm9keS50YXNrbmFtZTtcclxuICAgICAgICB0YXNrLnRhc2tkZXNjID0gcmVxLmJvZHkudGFza2Rlc2M7XHJcbiAgICAgICAgdGFzay5hc3NpZ25lZHRvID0gcmVxLmJvZHkuYXNzaWduZWR0bztcclxuICAgICAgICB0YXNrLnRhc2tzdGF0dXMgPSAnT1BFTic7XHJcbiAgICAgICAgdGFzay50YXNrdHlwZSA9ICd0YXNrJztcclxuICAgICAgICB0YXNrLnNhdmUoZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICByZXMuc2VuZChlcnIpO1xyXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdUYXNrIGNyZWF0ZWQhJyB9KTtcclxuICAgICAgICB9KTtcclxuICB9KVxyXG4gICAgLmdldChmdW5jdGlvbihyZXEsIHJlcykge1xyXG4gICAgICAgIFRhc2suZmluZChmdW5jdGlvbihlcnIsIHRhc2tzKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICByZXMuc2VuZChlcnIpO1xyXG5cclxuICAgICAgICAgICAgcmVzLmpzb24odGFza3MpO1xyXG4gICAgICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICByb3V0ZXIucm91dGUoJy9hcGkvbXl0YXNrLzp1c2VyRW1haWwnKSAgICBcclxuICAgIC5nZXQoZnVuY3Rpb24ocmVxLCByZXMpIHtcclxuICAgICAgICBUYXNrLmZpbmQoeyRhbmQ6W3thc3NpZ25lZHRvOnJlcS5wYXJhbXMudXNlckVtYWlsLnRvTG93ZXJDYXNlKCl9LHt0YXNrc3RhdHVzOidPUEVOJ31dfSwgZnVuY3Rpb24oZXJyLCB0YXNrKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICByZXMuc2VuZChlcnIpO1xyXG4gICAgICAgICAgICByZXMuanNvbih0YXNrKTtcclxuICAgICAgICB9KTtcclxuICB9KSAgXHJcbiAgXHJcbiAgcm91dGVyLnJvdXRlKCcvYXBpL25ld3Rhc2svOl9pZCcpICAgIFxyXG4gICAgLmdldChmdW5jdGlvbihyZXEsIHJlcykge1xyXG4gICAgICAgIFRhc2suZmluZEJ5SWQocmVxLnBhcmFtcy50YXNrX2lkLCBmdW5jdGlvbihlcnIsIHRhc2spIHtcclxuICAgICAgICAgICAgaWYgKGVycilcclxuICAgICAgICAgICAgICAgIHJlcy5zZW5kKGVycik7XHJcbiAgICAgICAgICAgIHJlcy5qc29uKHRhc2spO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuXHJcbiAgICAucHV0KGZ1bmN0aW9uKHJlcSwgcmVzKSB7XHJcbiAgICAgICAgVGFzay5maW5kQnlJZChyZXEucGFyYW1zLl9pZCwgZnVuY3Rpb24oZXJyLCB0YXNrKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICByZXMuc2VuZChlcnIpO1xyXG4gICAgICAgICAgICB0YXNrLnRhc2tuYW1lID0gcmVxLmJvZHkudGFza25hbWU7ICBcclxuICAgICAgICAgICAgdGFzay50YXNrZGVzYyA9IHJlcS5ib2R5LnRhc2tkZXNjO1xyXG4gICAgICAgICAgICB0YXNrLnNhdmUoZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKGVycik7XHJcbiAgICAgICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICd0YXNrIHVwZGF0ZWQhJyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG5cclxuICAgIC5kZWxldGUoZnVuY3Rpb24ocmVxLCByZXMpIHtcclxuICAgICAgICBUYXNrLnJlbW92ZSh7XHJcbiAgICAgICAgICAgIF9pZDogcmVxLnBhcmFtcy50YXNrX2lkXHJcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyLCB0YXNrKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICByZXMuc2VuZChlcnIpO1xyXG5cclxuICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IGRlbGV0ZWQnIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcm91dGVyLnJvdXRlKCcvYXBpL21hcmsvOl9pZCcpICBcclxuICAgIC5wdXQoZnVuY3Rpb24ocmVxLCByZXMpIHtcclxuICAgICAgICBUYXNrLmZpbmRCeUlkKHJlcS5wYXJhbXMuX2lkLCBmdW5jdGlvbihlcnIsIHRhc2spIHtcclxuICAgICAgICAgICAgaWYgKGVycilcclxuICAgICAgICAgICAgICAgIHJlcy5zZW5kKGVycik7XHJcbiAgICAgICAgICAgIHRhc2sudGFza3N0YXR1cyA9ICdDTE9TRUQnOyAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRhc2suc2F2ZShmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQoZXJyKTtcclxuICAgICAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ3Rhc2sgdXBkYXRlZCEnIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pICBcclxuXHJcbiAgLypSZXF1ZXN0IEVuZHBvaW50cyovXHJcblxyXG4gIHJvdXRlci5yb3V0ZSgnL2FwaS9uZXdyZXF1ZXN0JylcclxuICAgIC5wb3N0KGZ1bmN0aW9uKHJlcSwgcmVzKSB7ICAgICAgICBcclxuICAgICAgICB2YXIgdGFzayA9IG5ldyBUYXNrKCk7XHJcbiAgICAgICAgdGFzay50YXNrbmFtZSA9IHJlcS5ib2R5LnRhc2tuYW1lO1xyXG4gICAgICAgIHRhc2sudGFza2Rlc2MgPSByZXEuYm9keS50YXNrZGVzYztcclxuICAgICAgICAvL3Rhc2suYXNzaWduZWR0byA9IHJlcS5ib2R5LmFzc2lnbmVkdG87XHJcbiAgICAgICAgdGFzay50YXNrdHlwZSA9ICdyZXF1ZXN0JztcclxuICAgICAgICB0YXNrLnNhdmUoZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICByZXMuc2VuZChlcnIpO1xyXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdSZXF1ZXN0IGNyZWF0ZWQhJyB9KTtcclxuICAgICAgICB9KTtcclxuICB9KVxyXG5cclxuXHJcbmFwcC51c2UoJy8nLCByb3V0ZXIpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
